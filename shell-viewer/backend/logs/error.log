{"__augmented":true,"code":"SQLITE_ERROR","errno":1,"level":"error","message":"Server startup error: SQLITE_ERROR: no such table: shell_commands","service":"shell-viewer","stack":"Error: SQLITE_ERROR: no such table: shell_commands\n--> in Database#all('\\n' +\n  '      SELECT s.*, COUNT(c.id) as actual_command_count\\n' +\n  '      FROM shell_sessions s\\n' +\n  '      LEFT JOIN shell_commands c ON s.id = c.session_id\\n' +\n  '      GROUP BY s.id\\n' +\n  '      ORDER BY s.start_time DESC\\n' +\n  '      LIMIT 50\\n' +\n  '    ', [], [Function (anonymous)])\n    at /Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:521:20\n    at new Promise (<anonymous>)\n    at SessionManager.allQuery (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:520:12)\n    at SessionManager.getAllSessions (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:311:23)\n    at SessionManager.loadExistingSessions (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:491:33)\n    at SessionManager.initialize (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:39:16)\n    at async PachacutiShellViewerServer.start (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/server.js:258:7)","timestamp":"2025-08-23T19:30:15.763Z"}
{"__augmented":true,"code":"SQLITE_ERROR","errno":1,"level":"error","message":"Server startup error: SQLITE_ERROR: no such table: shell_commands","service":"shell-viewer","stack":"Error: SQLITE_ERROR: no such table: shell_commands\n--> in Database#all('\\n' +\n  '      SELECT s.*, COUNT(c.id) as actual_command_count\\n' +\n  '      FROM shell_sessions s\\n' +\n  '      LEFT JOIN shell_commands c ON s.id = c.session_id\\n' +\n  '      GROUP BY s.id\\n' +\n  '      ORDER BY s.start_time DESC\\n' +\n  '      LIMIT 50\\n' +\n  '    ', [], [Function (anonymous)])\n    at /Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:521:20\n    at new Promise (<anonymous>)\n    at SessionManager.allQuery (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:520:12)\n    at SessionManager.getAllSessions (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:311:23)\n    at SessionManager.loadExistingSessions (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:491:33)\n    at SessionManager.initialize (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:39:16)\n    at async PachacutiShellViewerServer.start (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/server.js:258:7)","timestamp":"2025-08-23T19:30:35.094Z"}
{"code":"invalid_api_key","error":{"code":"invalid_api_key","message":"Incorrect API key provided: your_ope************here. You can find your API key at https://platform.openai.com/account/api-keys.","param":null,"type":"invalid_request_error"},"headers":{"alt-svc":"h3=\":443\"; ma=86400","cf-cache-status":"DYNAMIC","cf-ray":"973d0713eafec2fd-IAH","connection":"keep-alive","content-length":"253","content-type":"application/json","date":"Sat, 23 Aug 2025 19:31:00 GMT","openai-processing-ms":"4","openai-version":"2020-10-01","server":"cloudflare","set-cookie":"__cf_bm=zq.HQt.rZxGyamxQNtFTZJ1._iU3nCPDg8Y6kGb.fu0-1755977460-1.0.1.1-2znovTNDdz.WI1xBVzMgM7_E7AXYThjROMojalThPRdIFiPHqc4JhsW109JwSeP51is749kombPwT49HYJe2qvGKNBMb0cGNJX3FvV8ACaU; path=/; expires=Sat, 23-Aug-25 20:01:00 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None, _cfuvid=.yUQW3I30brnM80le19mLkw.vEBqSVaNig7RSZ8R6v4-1755977460159-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None","strict-transport-security":"max-age=31536000; includeSubDomains; preload","www-authenticate":"Bearer realm=\"OpenAI API\"","x-content-type-options":"nosniff","x-request-id":"bc35e6602d7b5c740814ef8b68baee1a"},"level":"error","message":"❌ OpenAI initialization failed: 401 Incorrect API key provided: your_ope************here. You can find your API key at https://platform.openai.com/account/api-keys.","param":null,"request_id":"bc35e6602d7b5c740814ef8b68baee1a","service":"shell-viewer","stack":"Error: 401 Incorrect API key provided: your_ope************here. You can find your API key at https://platform.openai.com/account/api-keys.\n    at APIError.generate (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/openai/error.js:48:20)\n    at OpenAI.makeStatusError (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/openai/core.js:302:33)\n    at OpenAI.makeRequest (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/openai/core.js:346:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AISearchController.initialize (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/ai-search-controller.js:65:7)\n    at async PachacutiShellViewerServer.start (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/server.js:259:7)","status":401,"timestamp":"2025-08-23T19:30:59.909Z","type":"invalid_request_error"}
{"level":"error","message":"AI search error: Session manager not available","service":"shell-viewer","stack":"Error: Session manager not available\n    at AISearchController.performDatabaseSearch (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/ai-search-controller.js:106:13)\n    at AISearchController.search (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/ai-search-controller.js:84:40)\n    at /Users/Danallovertheplace/pachacuti/shell-viewer/backend/server.js:177:55\n    at Layer.handle [as handle_request] (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/index.js:280:10)","timestamp":"2025-08-25T10:17:01.171Z"}
{"level":"error","message":"GET search error: Session manager not available","service":"shell-viewer","stack":"Error: Session manager not available\n    at AISearchController.performDatabaseSearch (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/ai-search-controller.js:106:13)\n    at AISearchController.search (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/ai-search-controller.js:84:40)\n    at /Users/Danallovertheplace/pachacuti/shell-viewer/backend/server.js:177:55\n    at Layer.handle [as handle_request] (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/index.js:280:10)","timestamp":"2025-08-25T10:17:01.171Z"}
{"level":"error","message":"AI search error: Session manager not available","service":"shell-viewer","stack":"Error: Session manager not available\n    at AISearchController.performDatabaseSearch (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/ai-search-controller.js:106:13)\n    at AISearchController.search (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/ai-search-controller.js:84:40)\n    at /Users/Danallovertheplace/pachacuti/shell-viewer/backend/server.js:177:55\n    at Layer.handle [as handle_request] (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/index.js:280:10)","timestamp":"2025-08-25T10:17:01.967Z"}
{"level":"error","message":"GET search error: Session manager not available","service":"shell-viewer","stack":"Error: Session manager not available\n    at AISearchController.performDatabaseSearch (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/ai-search-controller.js:106:13)\n    at AISearchController.search (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/ai-search-controller.js:84:40)\n    at /Users/Danallovertheplace/pachacuti/shell-viewer/backend/server.js:177:55\n    at Layer.handle [as handle_request] (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/node_modules/express/lib/router/index.js:280:10)","timestamp":"2025-08-25T10:17:01.968Z"}
{"code":"ENOENT","errno":-2,"level":"error","message":"Error processing session file /Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db-wal: ENOENT: no such file or directory, open '/Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db-wal'","path":"/Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db-wal","service":"shell-viewer","stack":"Error: ENOENT: no such file or directory, open '/Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db-wal'\n    at async open (node:internal/fs/promises:639:25)\n    at async Object.readFile (node:internal/fs/promises:1243:14)\n    at async SessionManager.processNewSessionFile (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:139:38)","syscall":"open","timestamp":"2025-08-25T10:19:29.901Z"}
{"code":"ENOENT","errno":-2,"level":"error","message":"Error processing session file /Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db-shm: ENOENT: no such file or directory, open '/Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db-shm'","path":"/Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db-shm","service":"shell-viewer","stack":"Error: ENOENT: no such file or directory, open '/Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db-shm'\n    at async open (node:internal/fs/promises:639:25)\n    at async Object.readFile (node:internal/fs/promises:1243:14)\n    at async SessionManager.processNewSessionFile (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:139:38)","syscall":"open","timestamp":"2025-08-25T10:19:29.902Z"}
{"level":"error","message":"Error processing session file /Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db: Unexpected token 'S', \"SQLite for\"... is not valid JSON","service":"shell-viewer","stack":"SyntaxError: Unexpected token 'S', \"SQLite for\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at SessionManager.processNewSessionFile (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:139:32)","timestamp":"2025-08-25T10:19:29.905Z"}
{"level":"error","message":"Error updating session file /Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db: Unexpected token 'S', \"SQLite for\"... is not valid JSON","service":"shell-viewer","stack":"SyntaxError: Unexpected token 'S', \"SQLite for\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at SessionManager.processUpdatedSessionFile (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:150:32)","timestamp":"2025-08-25T10:19:29.905Z"}
{"level":"error","message":"Error processing session file /Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db-shm: Unexpected token '\u0018', \"\u0018�-\u0000\u0000\u0000\u0000\u0000\u0002\u0000\"... is not valid JSON","service":"shell-viewer","stack":"SyntaxError: Unexpected token '\u0018', \"\u0018�-\u0000\u0000\u0000\u0000\u0000\u0002\u0000\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at SessionManager.processNewSessionFile (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:139:32)","timestamp":"2025-08-25T10:19:30.110Z"}
{"level":"error","message":"Error processing session file /Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db-wal: Unexpected non-whitespace character after JSON at position 1 (line 1 column 2)","service":"shell-viewer","stack":"SyntaxError: Unexpected non-whitespace character after JSON at position 1 (line 1 column 2)\n    at JSON.parse (<anonymous>)\n    at SessionManager.processNewSessionFile (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:139:32)","timestamp":"2025-08-25T10:19:30.110Z"}
{"level":"error","message":"Error updating session file /Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db: Unexpected token 'S', \"SQLite for\"... is not valid JSON","service":"shell-viewer","stack":"SyntaxError: Unexpected token 'S', \"SQLite for\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at SessionManager.processUpdatedSessionFile (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:150:32)","timestamp":"2025-08-25T10:19:30.210Z"}
{"level":"error","message":"Error processing session file /Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db-wal: Unexpected non-whitespace character after JSON at position 1 (line 1 column 2)","service":"shell-viewer","stack":"SyntaxError: Unexpected non-whitespace character after JSON at position 1 (line 1 column 2)\n    at JSON.parse (<anonymous>)\n    at SessionManager.processNewSessionFile (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:139:32)","timestamp":"2025-08-25T10:19:30.773Z"}
{"level":"error","message":"Error processing session file /Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db-shm: Unexpected token '\u0018', \"\u0018�-\u0000\u0000\u0000\u0000\u0000\u0003\u0000\"... is not valid JSON","service":"shell-viewer","stack":"SyntaxError: Unexpected token '\u0018', \"\u0018�-\u0000\u0000\u0000\u0000\u0000\u0003\u0000\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at SessionManager.processNewSessionFile (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:139:32)","timestamp":"2025-08-25T10:19:30.773Z"}
{"level":"error","message":"Error updating session file /Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db: Unexpected token 'S', \"SQLite for\"... is not valid JSON","service":"shell-viewer","stack":"SyntaxError: Unexpected token 'S', \"SQLite for\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at SessionManager.processUpdatedSessionFile (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:150:32)","timestamp":"2025-08-25T10:19:30.874Z"}
{"level":"error","message":"Error updating session file /Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db: Unexpected token 'S', \"SQLite for\"... is not valid JSON","service":"shell-viewer","stack":"SyntaxError: Unexpected token 'S', \"SQLite for\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at SessionManager.processUpdatedSessionFile (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:150:32)","timestamp":"2025-08-25T10:19:49.714Z"}
{"level":"error","message":"Error updating session file /Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db: Unexpected token 'S', \"SQLite for\"... is not valid JSON","service":"shell-viewer","stack":"SyntaxError: Unexpected token 'S', \"SQLite for\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at SessionManager.processUpdatedSessionFile (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:150:32)","timestamp":"2025-08-25T10:19:51.116Z"}
{"level":"error","message":"Error processing session file /Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db-wal: Unexpected end of JSON input","service":"shell-viewer","stack":"SyntaxError: Unexpected end of JSON input\n    at JSON.parse (<anonymous>)\n    at SessionManager.processNewSessionFile (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:139:32)","timestamp":"2025-08-25T10:19:52.342Z"}
{"level":"error","message":"Error processing session file /Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db-shm: Unexpected token '\u0018', \"\u0018�-\u0000\u0000\u0000\u0000\u0000\u0000\u0000\"... is not valid JSON","service":"shell-viewer","stack":"SyntaxError: Unexpected token '\u0018', \"\u0018�-\u0000\u0000\u0000\u0000\u0000\u0000\u0000\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at SessionManager.processNewSessionFile (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:139:32)","timestamp":"2025-08-25T10:19:52.342Z"}
{"level":"error","message":"Error updating session file /Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db: Unexpected token 'S', \"SQLite for\"... is not valid JSON","service":"shell-viewer","stack":"SyntaxError: Unexpected token 'S', \"SQLite for\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at SessionManager.processUpdatedSessionFile (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:150:32)","timestamp":"2025-08-25T10:19:52.444Z"}
{"level":"error","message":"Error updating session file /Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db: Unexpected token 'S', \"SQLite for\"... is not valid JSON","service":"shell-viewer","stack":"SyntaxError: Unexpected token 'S', \"SQLite for\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at SessionManager.processUpdatedSessionFile (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:150:32)","timestamp":"2025-08-25T10:19:53.438Z"}
{"level":"error","message":"Error updating session file /Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db: Unexpected token 'S', \"SQLite for\"... is not valid JSON","service":"shell-viewer","stack":"SyntaxError: Unexpected token 'S', \"SQLite for\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at SessionManager.processUpdatedSessionFile (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:150:32)","timestamp":"2025-08-25T10:19:54.798Z"}
{"level":"error","message":"Error updating session file /Users/Danallovertheplace/pachacuti/session-recorder/data/sessions/.swarm/memory.db: Unexpected token 'S', \"SQLite for\"... is not valid JSON","service":"shell-viewer","stack":"SyntaxError: Unexpected token 'S', \"SQLite for\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at SessionManager.processUpdatedSessionFile (/Users/Danallovertheplace/pachacuti/shell-viewer/backend/lib/session-manager.js:150:32)","timestamp":"2025-08-25T10:19:55.746Z"}
